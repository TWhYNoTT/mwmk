@page
@model ChangePasswordModel
@{
    ViewData["Title"] = "Change password";
    ViewData["ActivePage"] = ManageNavPages.ChangePassword;
}

@section Styles {
    <link href="@Url.Content("~/css/css/change_pas.css")" rel="stylesheet" />
    <link href="@Url.Content("~/css/css/profile.css")" rel="stylesheet" />
}
<div id="header-container"></div>

<form class="chang" id="change-password-form" method="post">
    <h3>Change Password</h3>
    <partial name="_StatusMessage" for="StatusMessage" />
    <div class="change-password">
        <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
        <label asp-for="Input.OldPassword" class="form-label">Current Password</label>
        <input asp-for="Input.OldPassword" type="password" id="current-password" class="form-control" autocomplete="current-password" aria-required="true" placeholder="current password." />
        <i class="fa-regular fa-eye" id="toggleCurrentPassword"></i>
        <span asp-validation-for="Input.OldPassword" class="text-danger"></span>


        <label asp-for="Input.NewPassword" class="form-label">New Password</label>
        <input asp-for="Input.NewPassword" type="password" placeholder="New password" id="new-password" class="form-control" autocomplete="new-password" aria-required="true" />
        <i class="fa-regular fa-eye" id="toggleNewPassword"></i>
        <span asp-validation-for="Input.NewPassword" class="text-danger"></span>


        <label asp-for="Input.ConfirmPassword" type="password" placeholder="Password"  class="form-label">Confirm Password</label>
        <input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" id="confirmnew-password" aria-required="true" placeholder="confirm password." />
        <i class="fa-regular fa-eye" id="toggleConfirmNewPassword"></i>
        <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>    
    </div>
    <button type="submit" id="changButton">Change Password</button>
</form>



@section Scripts {
    <partial name="_ValidationScriptsPartial" />
   <script>
        // Get references to all password inputs and their toggle icons
        const togglePasswordHandler = (inputElement, iconElement) => {
            iconElement.addEventListener('mousedown', () => {
                inputElement.type = 'text'; // Show password
                iconElement.classList.remove('fa-eye');
                iconElement.classList.add('fa-eye-slash');
            });

            iconElement.addEventListener('mouseup', () => {
                inputElement.type = 'password'; // Hide password
                iconElement.classList.remove('fa-eye-slash');
                iconElement.classList.add('fa-eye');
            });

            iconElement.addEventListener('mouseleave', () => {
                inputElement.type = 'password'; // Hide password on mouse leave
                iconElement.classList.remove('fa-eye-slash');
                iconElement.classList.add('fa-eye');
            });
        };

        // Add toggle functionality for each input and its corresponding icon
        togglePasswordHandler(
            document.getElementById('current-password'),
            document.getElementById('toggleCurrentPassword')
        );
        togglePasswordHandler(
            document.getElementById('new-password'),
            document.getElementById('toggleNewPassword')
        );
        togglePasswordHandler(
            document.getElementById('confirmnew-password'),
            document.getElementById('toggleConfirmNewPassword')
        );

   </script>
}
